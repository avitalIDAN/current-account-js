<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מנהל הכנסות והוצאות</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="icon-up-down.png">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>
    <h1>מנהל הכנסות והוצאות</h1>

    <div class="top-section">
        <!-- חלק שמאלי: הוספה וסך הכל -->
        <div class="left-section">
            <!-- טופס קלט -->
     
            <div class="add-expense-container">
                <h2>הוספה חדשה</h2>

                <!-- הכנסה, הוצאה או הלוואה -->
                <label style="color:rgb(0, 255, 0)">
                    <input type="radio" name="type" value="income"> הכנסה
                </label>
                <label style="color:rgb(255, 0, 0)">
                    <input type="radio" name="type" value="expense" > הוצאה
                </label>
                <label style="color:rgb(255, 0, 0)">
                    <input type="radio" name="type" value="loan" > הלוותי / החזרתי
                </label>
                <label style="color:rgb(0, 255, 0)">
                    <input type="radio" name="type" value="repayment" > לוויתי/ החזירו
                </label>
                
                <br><br>
                <label for="amount">סכום:</label>
                <input type="number" id="amount" placeholder="הכנס סכום">
                <br><br>

                <label for="description">תיאור:</label>
                <input type="text" id="description" placeholder="הכנס תיאור">
                <br><br>

                <label for="paymentMethod">צורת תשלום:</label>
                <select id="paymentMethod">
                    <option value="מזומן">מזומן</option>
                    <option value="אשראי">אשראי</option>
                    <option value="העברה בנקאית">העברה בנקאית</option>
                    <option value="פייבוקס">פייבוקס</option>
                </select>
                <br><br>

                <label for="expenseDate">תאריך: <input type="date" id="expenseDate"></label>
                <br><br>
                <button onclick="addExpense()">הוסף</button>
            </div>

            <h3 id="totalIncome" style="color:rgb(0, 255, 0)">סך הכנסות: 0</h3>
            <h3 id="totalExpense" style="color:rgb(255, 0, 0)">סך הוצאות: 0</h3>
            <h3 id="loanSummary" style="display: none; color:rgb(0, 0, 255)">סך הלוואות: הוצאה- 0, הכנסה- 0</h3>
            <h3 id="total" >סך הכל: 0</h3>

        </div>
    
        <!-- חלק ימני: כפתור תקציב -->
        <div class="right-section">
            <div id="budgetDisplay">
                <h3>תקציב חודשי: 0 ₪</h3>
                <h3>הסכום שנוצל: 0 ₪</h3>
                <h3>ניצול חודשי: 0 %</h3>
                <p>יום תחילת התקציב הוא ה-- בחודש</p> 
            </div>
            
            <button id="openBudgetModal" onclick="openBudgetModal()">הגדרת תקציב</button>
            
        </div>
    </div>
    


    <label>מתאריך: <input type="date" id="startDate" onchange="filterExpenses()"></label>
    <!-- onchange="filterByDateRange()" -->
    <label>עד תאריך: <input type="date" id="endDate" onchange="filterExpenses()"></label>

    <!-- טבלת הכנסות והוצאות -->
    <h2>רשימת הכנסות והוצאות:</h2>
    <table id="expenseTable">
        <thead>
            <tr>
                <th onclick="sortExpenses('date')">תאריך <span class="sort-icon"></span></th>
                <th onclick="sortExpenses('amount')">סכום <span class="sort-icon"></span></th>
                <th onclick="sortExpenses('description')">תיאור <span class="sort-icon"></span></th>
                <th onclick="sortExpenses('paymentMethod')">צורת תשלום <span class="sort-icon"></span></th>
                <th onclick="sortExpenses('income')">הכנסה <span class="sort-icon"></span></th>
                <th onclick="sortExpenses('expense')">הוצאה <span class="sort-icon"></span></th>
                <th>עריכה</th>
                <th>מחיקה</th> 
                <th></th> 
            </tr>
            <tr>
                <th><input type="text" placeholder="סנן לפי תאריך" oninput="filterExpenses()"></th>
                <th><input type="number" placeholder="סנן לפי סכום" oninput="filterExpenses()"></th>
                <th><input type="text" placeholder="סנן לפי תיאור" oninput="filterExpenses()"></th>
                <th><input type="text" placeholder="סנן לפי תשלום" oninput="filterExpenses()"></th>
                <th colspan="5">
                    <button onclick="filterExpenses('income')">רק הכנסות</button>
                    <button onclick="filterExpenses('expense')">רק הוצאות</button>
                    <button onclick="filterExpenses('loan_repayment')">הלוואות והחזרים</button>
                    <button onclick="filterExpenses('all')">הכל</button>
                </th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>


    <!-- חלון עריכה
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeEditModal()">&times;</span>
            <h2>עריכה</h2>
            <form id="editForm">
                <label for="editDate">תאריך:</label>
                <input type="date" id="editDate" required>
                <br><br>
    
                <label for="editAmount">סכום:</label>
                <input type="number" id="editAmount" required>
                <br><br>
    
                <label for="editDescription">תיאור:</label>
                <input type="text" id="editDescription" required>
                <br><br>
    
                <label for="editPaymentMethod">צורת תשלום:</label>
                <input type="text" id="editPaymentMethod" required>
                <br><br>
    
                <label for="editType">סוג:</label>
                <select id="editType" required>
                    <option value="income">הכנסה</option>
                    <option value="expense">הוצאה</option>
                    <option value="loan">הלוואה</option>
                    <option value="repayment">החזר</option>
                </select>
                <br><br>
    
                <button type="button" onclick="saveEdit()">שמור</button>
            </form>
        </div>
    </div>
     -->

    <!-- חלון עריכה -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeEditModal()">&times;</span>
            <h2>עריכה</h2>

            <!-- טופס העריכה -->
            <form id="editForm">
                <!-- שדות סוגים -->
                <label style="color:rgb(0, 255, 0)">
                    <input type="radio" name="editType" value="income"> הכנסה
                </label>
                <label style="color:rgb(255, 0, 0)">
                    <input type="radio" name="editType" value="expense"> הוצאה
                </label>
                <label style="color:rgb(255, 0, 0)">
                    <input type="radio" name="editType" value="loan"> הלוואה / החזרתי
                </label>
                <label style="color:rgb(0, 255, 0)">
                    <input type="radio" name="editType" value="repayment"> לוויתי / החזירו
                </label>
                <br><br>

                <!-- סכום -->
                <label for="editAmount">סכום:</label>
                <input type="number" id="editAmount" required>
                <br><br>

                <!-- תיאור -->
                <label for="editDescription">תיאור:</label>
                <input type="text" id="editDescription" required>
                <br><br>

                <!-- צורת תשלום -->
                <label for="editPaymentMethod">צורת תשלום:</label>
                <select id="editPaymentMethod" required>
                    <option value="מזומן">מזומן</option>
                    <option value="אשראי">אשראי</option>
                    <option value="העברה בנקאית">העברה בנקאית</option>
                    <option value="פייבוקס">פייבוקס</option>
                </select>
                <br><br>

                <!-- תאריך -->
                <label for="editDate">תאריך:</label>
                <input type="date" id="editDate" required>
                <br><br>

                <!-- כפתור שמירה -->
                <button type="button" onclick="saveEdit()">שמור</button>
            </form>
        </div>
    </div>


    <div id="budgetModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeBudgetModal()">&times;</span>
            <h2>הגדרת תקציב חודשי</h2>
            <form id="budgetForm">
                <label for="budgetAmount">סכום תקציב:</label>
                <input type="number" id="budgetAmount" placeholder="הזן סכום תקציב" required>
                <br><br>
    
                <!-- <label for="budgetStartDate">תאריך התחלה:</label>
                <input type="date" id="budgetStartDate" required>
                <br><br>
    
                <label for="budgetEndDate">תאריך סיום:</label>
                <input type="date" id="budgetEndDate" required>
                <br><br> -->
 
                <label for="budgetEndDate">תאריך התחלה וסיום בחודש (לדוגמה עשירי בחודש):</label>
                <input type="number" id="budgetStartEndDay"  min="1" max="28" placeholder="הזן מספר בין 1 ל-28" style="width: 150px" required>
                <br><br>

                <button type="button" onclick="saveBudget()">שמור תקציב</button>
            </form>
        </div>
    </div>
    
     
    <!-- טעינת קבצי JavaScript -->
    <script src="budgetManagement.js"></script>
    <script src="editExpense.js"></script>
    <script src="hebrewDate.js"></script>
    <script src="table.js"></script>
    <script src="app.js"></script>
</body>
</html>
